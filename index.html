<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLOCK BLAST Adventure Master</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
</head>
<body>
    <div class="game-container">
        <h1>BLOCK BLAST</h1>
        <div class="header-buttons">
            <button id="auth-button" class="game-button button-primary" data-modal="auth">Вход/Регистрация</button>
            <button id="leaderboard-button" class="game-button button-secondary" data-modal="leaderboard">Топ 10</button>
            <button id="mode-button" class="game-button button-settings" data-modal="mode">Режим</button>
            <button id="theme-toggle-button" class="game-button button-settings" data-modal="settings">Светлая тема</button>
        </div>
        
        <div class="score-panel">
            <span>Счет: <span id="score-value">0</span></span>
            <span>Рекорд: <span id="high-score-value">0</span></span>
        </div>
        <div id="combo-display"></div>
        <div id="mode-info"></div>

        <div id="game-board">
            </div>

        <div id="ai-hint-message" style="color: #4a42f5; font-weight: 600; margin-top: 10px; min-height: 1.2em; transition: opacity 0.3s;"></div>
        
        <div class="next-blocks-panel">
            <div id="next-blocks">
                </div>
        </div>
        
        <button id="new-game-button" class="game-button button-danger" style="margin-top: 20px;">Новая игра</button>
        
        <div class="sanwec-credit">
            © 2024 BLOCK BLAST
        </div>
    </div>
    
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-modal="auth">&times;</span>
            <h2>Вход / Регистрация</h2>
            <form id="auth-form" class="auth-form">
                <input type="email" id="auth-email" placeholder="Email" required>
                <input type="password" id="auth-password" placeholder="Пароль" required>
                <button type="submit" id="auth-login-button" class="game-button button-primary" style="width: 100%;">Войти</button>
                <button type="button" id="auth-toggle-button" class="game-button button-secondary" style="width: 100%; margin-top: 5px;">Нет аккаунта? Регистрация</button>
            </form>
            <p id="auth-message" style="color: #e74c3c; margin-top: 10px;"></p>
            <div style="margin-top: 15px; text-align: center;">
                <button id="logout-button" class="game-button button-danger" style="width: 100%; display: none;">Выйти</button>
            </div>
        </div>
    </div>
    
    <div id="leaderboard-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-modal="leaderboard">&times;</span>
            <h2>Таблица лидеров</h2>
            <ul id="leaderboard-list">
                </ul>
        </div>
    </div>
    
    <div id="mode-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-modal="mode">&times;</span>
            <h2>Выбор режима игры</h2>
            <button class="mode-selection-button" data-mode="normal">
                <strong>Обычный (Classic)</strong><br>
                <span>Классическая игра на выживание.</span>
            </button>
            <button class="mode-selection-button" data-mode="training">
                <strong>Тренировка (AI Hint)</strong><br>
                <span>ИИ показывает свой лучший ход. Идеально для обучения.</span>
            </button>
        </div>
    </div>
    
    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <span class="close-button" data-modal="profile">&times;</span>
            <h2>Профиль игрока</h2>
            <p id="profile-nickname">Никнейм: Загрузка...</p>
            <p id="profile-email">Email: Загрузка...</p>
            <p id="profile-high-score">Рекорд: 0</p>
            
            <button id="edit-profile-button" class="game-button button-primary" style="width: 100%; margin-top: 15px; display: none;">Редактировать никнейм</button>
            
            <form id="edit-profile-form" class="edit-profile-form" style="display: none; margin-top: 15px;">
                <label for="edit-nickname-input" style="display: block; margin-top: 15px; margin-bottom: 5px;">Новый никнейм:</label>
                <input type="text" id="edit-nickname-input" placeholder="Введите никнейм" required minlength="3">
                <button type="submit" class="game-button button-secondary" style="width: 100%;">Сохранить</button>
                <button type="button" id="cancel-edit-button" class="game-button button-danger" style="width: 100%; margin-top: 5px;">Отмена</button>
            </form>
            <p id="profile-message" style="color: #e74c3c; margin-top: 10px;"></p>
        </div>
    </div>

    <script src="game.js"></script>
    <script src="auth.js"></script>
</body>
</html>
